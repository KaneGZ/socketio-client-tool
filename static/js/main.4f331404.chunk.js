(this["webpackJsonpreact-client-tool"]=this["webpackJsonpreact-client-tool"]||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(1),s=n.n(a),i=n(23),r=n.n(i),o=(n(80),n(25)),l=n(8),j=(n(81),n(119)),d=n(126),u=n(71),b=n(120);function O(e){var t=e.connData,n=e.createConnection,s=e.eventsToListenFor,i=e.emitTo,r=Object(a.useState)([]),o=Object(l.a)(r,2),O=o[0],h=o[1],f=Object(a.useState)([]),x=Object(l.a)(f,2),m=x[0],v=x[1],g=Object(a.useState)(),p=Object(l.a)(g,2),k=p[0],y=p[1];return Object(a.useEffect)((function(){y((function(){return t.config})),v((function(){return t.server}))}),[t]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(j.a,{variant:"danger",show:t.errors.length>0||O.length>0,children:[t.errors.join(", ")," ",O.join(", ")]}),Object(c.jsxs)(d.a,{onSubmit:function(e){e.preventDefault(),e.stopPropagation();try{JSON.parse(k)}catch(e){return console.log("cannot parse config json",e),void h((function(){return[e]}))}h((function(){return[]})),n(m,k)},children:[Object(c.jsx)(d.a.Row,{className:"mb-2",children:Object(c.jsx)(u.a,{children:Object(c.jsx)(d.a.Control,{required:!0,value:m,placeholder:"server url",type:"url",onChange:function(e){return v(e.target.value)}})})}),Object(c.jsx)(d.a.Row,{className:"mb-2",children:Object(c.jsx)(u.a,{children:Object(c.jsx)(d.a.Control,{as:"textarea",placeholder:"JSON config",value:k,onChange:function(e){return y(e.target.value)}})})}),Object(c.jsx)(d.a.Row,{className:"mt-2",children:Object(c.jsxs)(u.a,{children:[Object(c.jsxs)(d.a.Text,{className:"mb-2",children:[Object(c.jsx)("strong",{children:"Listen to"}),": ",s.join(", ")," ",Object(c.jsx)("strong",{children:"Emit to"}),": ",i.join(", ")]}),Object(c.jsx)(b.a,{variant:"success",type:"submit",block:!0,disabled:t.loading,children:t.loading?"Connecting...":"Connect"}),Object(c.jsxs)("div",{className:"mt-3 text-center text-warning",children:["This uses socket.io version 3 and above. For version 2.x use the previous version of socketio-client-tool ",Object(c.jsx)("a",{href:"v1/",children:"here"}),"."]})]})})]})]})}var h=n(128),f=n(121),x=n(122),m=n(72);function v(e){var t=e.data,n=e.title,a=e.stack,s=e.channels,i=e.clearHistory,r=e.emitBack,o=t.map((function(e){return Object(c.jsx)(h.a.Item,{children:Object(c.jsxs)(f.a,{children:[Object(c.jsxs)(u.a,{sm:4,children:[Object(c.jsx)("small",{children:e.date.toLocaleTimeString()})," ",Object(c.jsx)("br",{})," ",Object(c.jsx)(x.a,{variant:"info",children:e.channel})]}),Object(c.jsxs)(u.a,{children:[Object(c.jsx)("div",{className:"float-right",children:Object(c.jsx)(b.a,{className:"function"!==typeof r?"d-none":"",size:"sm",variant:"warning",onClick:function(t){return function(e,t){"function"===typeof r&&r(t.channel,t.data)}(0,e)},children:"emit"})}),Object(c.jsx)("pre",{children:"string"===typeof e.data?e.data:JSON.stringify(e.data,null,2)})]})]})},e.date.toISOString()+"--"+e.channel)}));return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"mt-4 histories",children:[Object(c.jsxs)("h3",{children:[n,Object(c.jsxs)(b.a,{size:"sm",onClick:function(e){i(a,s)},className:o.length>0?"ml-2 ":"d-none",variant:"danger",children:[Object(c.jsx)(m.a,{className:"mr-2"}),"clear"]})]}),Object(c.jsx)(h.a,{variant:"flush rounded text-white",children:o})]})})}function g(e){var t=e.listeners,n=e.addListener,s=e.listenHistory,i=e.clearHistory,r=Object(a.useState)(""),O=Object(l.a)(r,2),h=O[0],f=O[1],x=Object(a.useState)([]),m=Object(l.a)(x,2),g=m[0],p=m[1],k=function(e){return s.filter((function(t){return e===t.channel}))},y=t.map((function(e,t){return Object(c.jsx)(v,{data:k(e),title:e,stack:"listen",channels:[e],clearHistory:i},t)}));return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(j.a,{variant:"danger",show:g.length>0,children:g.join(", ")}),Object(c.jsx)(d.a,{onSubmit:function(e){e.preventDefault(),n(h),f("")},noValidate:!0,validated:0===g.length,children:Object(c.jsxs)(d.a.Row,{className:"mb-2",children:[Object(c.jsx)(u.a,{children:Object(c.jsx)(d.a.Control,{placeholder:"listen to a new event...",value:h,onChange:function(e){f(e.target.value.trim()),p((function(e){return[]})),t.includes(e.target.value)&&p((function(e){return[].concat(Object(o.a)(e),["Event already exists"])}))}})}),Object(c.jsx)(u.a,{children:Object(c.jsx)(b.a,{variant:"success",type:"submit",block:!0,disabled:0!==g.length||h.length<1,children:"Add"})})]})})]}),Object(c.jsx)("h3",{children:"Listening to"}),y]})}function p(e){var t=e.emitToChannels,n=e.addEmitTo,s=e.emitData,i=e.emitHistory,r=e.clearHistory,o=e.stack,O=Object(a.useState)("socketio-client"),h=Object(l.a)(O,2),f=h[0],x=h[1],m=Object(a.useState)(""),g=Object(l.a)(m,2),p=g[0],k=g[1],y=Object(a.useState)(!1),w=Object(l.a)(y,2),S=w[0],N=w[1],C=Object(a.useState)(""),H=Object(l.a)(C,2),T=H[0],D=H[1],J=Object(a.useState)([]),E=Object(l.a)(J,2),L=E[0],R=E[1],I=t.map((function(e){return Object(c.jsx)("option",{value:e,children:e},e)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(d.a,{onSubmit:function(e){e.preventDefault(),n(T),D(""),x((function(){return T}))},className:"mb-3",children:Object(c.jsxs)(d.a.Row,{children:[Object(c.jsx)(u.a,{xs:4,children:Object(c.jsx)(d.a.Control,{size:"sm",value:T,onChange:function(e){return D(e.target.value)},placeholder:"Event name"})}),Object(c.jsx)(u.a,{xs:2,children:Object(c.jsx)(b.a,{size:"sm",variant:"info",type:"submit",block:!0,children:"Add"})})]})}),Object(c.jsx)("hr",{}),Object(c.jsxs)(d.a,{onSubmit:function(e){e.preventDefault();var t=p;if(!0===S)try{t=JSON.parse(p)}catch(n){return void R((function(){return["Failed to parse JSON data: ".concat(n)]}))}k((function(){return""})),R((function(){return[]})),s(f,t)},children:[Object(c.jsx)(j.a,{variant:"danger",show:L.length>0,children:L.join(", ")}),Object(c.jsxs)(d.a.Row,{className:"mb-2",children:[Object(c.jsx)(u.a,{children:Object(c.jsx)(d.a.Control,{as:"select",value:f,onChange:function(e){return x(e.target.value)},children:I})}),Object(c.jsx)(u.a,{children:Object(c.jsx)(d.a.Check,{type:"switch",id:"is-json",label:"JSON data",value:S,onChange:function(e){return N((function(){return e.target.checked}))},placeholder:"data...",className:"pt-3 pl-5"})})]}),Object(c.jsx)(d.a.Row,{className:"mb-2",children:Object(c.jsx)(u.a,{children:Object(c.jsx)(d.a.Control,{as:"textarea",value:p,onChange:function(e){return k(e.target.value)}})})}),Object(c.jsx)(d.a.Row,{children:Object(c.jsx)(u.a,{children:Object(c.jsx)(b.a,{variant:"success",type:"submit",block:!0,children:"Emit"})})})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"mt-4",children:Object(c.jsx)(v,{data:i,emitBack:s,title:"Messages",clearHistory:r,stack:o})})]})}function k(e){var t=e.ackHistory,n=e.clearHistory;return Object(c.jsx)(v,{data:t,title:"Messages",stack:"ack",clearHistory:n})}var y=n(73),w=n(123),S=n(127),N=n(124),C=n(125),H=n(56);var T=function(){var e=Object(a.useState)({connected:!1,loading:!1,server:"http://localhost:8080",config:'{"path": "/socket.io", "forceNew": true, "reconnectionAttempts": 3, "timeout": 2000}',errors:[]}),t=Object(l.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(0),r=Object(l.a)(i,2),j=r[0],d=r[1],b=Object(a.useState)(["socketio-client","message"]),h=Object(l.a)(b,2),x=h[0],m=h[1],v=Object(a.useState)([]),T=Object(l.a)(v,2),D=T[0],J=T[1],E=Object(a.useState)(["socketio-client","socketio-client-ack"]),L=Object(l.a)(E,2),R=L[0],I=L[1],A=Object(a.useState)([]),z=Object(l.a)(A,2),F=z[0],B=z[1],K=Object(a.useState)([]),M=Object(l.a)(K,2),U=M[0],q=M[1],P=Object(a.useState)([]),V=Object(l.a)(P,2),G=V[0],Q=V[1];function W(e){D.includes(e)||(J((function(t){return[e].concat(Object(o.a)(t))})),window.iosocket.on(e,(function(t){console.log("data received",e,t);var n=new Date,c={key:n.toLocaleString(),date:n,channel:e,data:"string"===typeof t?t:JSON.stringify(t,null,2),dataType:"string"===typeof t?"string":"json"};q((function(e){return[c].concat(Object(o.a)(e))}))})))}function X(e,t){switch(e){case"emit":B((function(){return[]}));break;case"listen":q((function(e){return e.filter((function(e){return!t.includes(e.channel)}))}));break;case"ack":Q((function(){return[]}))}}return Object(a.useEffect)((function(){if(n.connected)!function(){var e={server:n.server,listen:D,emit:R,config:n.config};window.location.hash=window.btoa(JSON.stringify(e))}();else{var e=""!==window.location.hash&&JSON.parse(window.atob(window.location.hash.split("#")[1]));!1!==e&&0===j&&(d((function(){return 1})),e.listen.length>0&&m((function(){return e.listen})),I((function(){return e.emit})),s((function(){return{connected:!1,loading:!1,server:e.server,config:e.config,errors:[]}})))}}),[n.connected,n.server,n.config,D,R,j]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)(w.a,{children:[Object(c.jsx)(f.a,{children:Object(c.jsxs)(u.a,{className:"text-right",children:[Object(c.jsxs)("span",{className:"small",children:["ID: ",Object(c.jsx)("b",{children:n.socketId})," Server: ",Object(c.jsx)("b",{children:n.server})]}),n.connected?Object(c.jsx)(H.a,{className:"text-success ml-3 h3"}):Object(c.jsx)(H.b,{className:"text-danger mx-2 h3"})]})}),Object(c.jsx)(f.a,{children:Object(c.jsx)(u.a,{children:Object(c.jsxs)(S.a,{defaultActiveKey:"listen",className:"mb-4 nav-fillx",children:[Object(c.jsx)(N.a,{eventKey:"listen",title:"Listen",children:Object(c.jsx)(g,{listeners:D,addListener:W,listenHistory:U,clearHistory:X,stack:"listen"})}),Object(c.jsx)(N.a,{eventKey:"emit",title:"Emit",children:Object(c.jsx)(p,{emitToChannels:R,addEmitTo:function(e){I((function(t){return[e].concat(Object(o.a)(t))}))},emitData:function(e,t){window.iosocket.emit(e,t,(function(t){var n=new Date,c={key:n.toUTCString(),channel:e,date:n,data:t,type:"string"===typeof t?"string":"json"};Q((function(e){return[c].concat(Object(o.a)(e))}))}));var n=new Date,c={key:n.toUTCString(),channel:e,date:n,data:t,type:"string"===typeof t?"string":"json"};B((function(e){return[c].concat(Object(o.a)(e))}))},emitHistory:F,clearHistory:X,stack:"emit"})}),Object(c.jsx)(N.a,{eventKey:"ack",title:"Ack",children:Object(c.jsx)(k,{ackHistory:G,stack:"ack",clearHistory:X})})]})})})]}),Object(c.jsxs)(C.a,{show:!n.connected,backdrop:"static",centered:!0,size:"lg",children:[Object(c.jsx)(C.a.Header,{children:Object(c.jsx)(C.a.Title,{children:"Configure connection"})}),Object(c.jsx)(C.a.Body,{children:Object(c.jsx)(O,{eventsToListenFor:x,emitTo:R,connData:n,createConnection:function(e,t){s((function(){return{connected:!1,loading:!0,socketId:"connecting..",server:e,config:t,errors:[]}})),window.iosocket=Object(y.io)(e,JSON.parse(t)),window.iosocket.on("connect",(function(){s((function(){return{connected:!0,loading:!1,server:e,socketId:window.iosocket.id,config:t,errors:[]}})),x.map((function(e){return W(e)}))})),window.iosocket.on("disconnect",(function(e){console.log("on disconnect",e)}))}})})]})]})};r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root"))},80:function(e,t,n){},81:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.4f331404.chunk.js.map